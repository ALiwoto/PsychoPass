<!DOCTYPE html>
<html>
 <head>
  <meta charset="utf-8"/>
  <meta content="no-referrer" name="referrer"/>
  <meta content="default-src 'none'; style-src 'self'" http-equiv="content-security-policy"/>
  <meta content="width=device-width, initial-scale=1" name="viewport"/>
  <!-- <link rel="canonical" href="https://blankx.gitlab.io/methods/tokens.html" /> -->
  <meta content="dark" name="color-scheme"/>
  <meta content="#15A4E9" name="theme-color"/>
  <title>
   Token Methods
  </title>
  <link crossorigin="anonymous" href="../style.css" rel="stylesheet"/>
  <link crossorigin="anonymous" href="../pygments.css" rel="stylesheet"/>
 </head>
 <body>
  <h1>
   Token Methods
  </h1>
  <div class="head">
   <a href="../">
    home
   </a>
   |
   <a href="./">
    methods
   </a>
  </div>
  <h3>
   Table of Contents:
  </h3>
  <ul>
   <li>
    <a href="#create">
     /create
    </a>
   </li>
   <li>
    <a href="#changeperm">
     /changePerm
    </a>
   </li>
   <li>
    <a href="#revoke">
     /revoke
    </a>
   </li>
   <li>
    <a href="#gettoken">
     /getToken
    </a>
   </li>
   <li>
    <a href="#registeredusers">
     /registeredUsers
    </a>
   </li>
  </ul>
  <h2 id="create">
   <code>
    /create
   </code>
   <a class="permalink" href="#create">
    ¶
   </a>
  </h2>
  <p>
   Returns a token for a user (and creates one if it doesn't exist)
  </p>
  <h3>
   URL Query Parameters
  </h3>
  <table>
   <tr>
    <th>
     Key
    </th>
    <th>
     Value
    </th>
   </tr>
   <tr>
    <td>
     token
    </td>
    <td>
     An owner token to authorize this request
    </td>
   </tr>
   <tr>
    <td>
     userid
    </td>
    <td>
     User ID of the user to generate a token for
    </td>
   </tr>
   <tr>
    <td>
     permission
    </td>
    <td>
     Permission to give the token (if it exists it will alter the permission)
    </td>
   </tr>
  </table>
  <h3>
   Example response
  </h3>
  <div class="highlight">
   <pre><span></span><code><span class="p">{</span>
    <span class="nt">"success"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nt">"result"</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">"permission"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="nt">"user_id"</span><span class="p">:</span> <span class="mi">516124792</span><span class="p">,</span>
        <span class="nt">"hash"</span><span class="p">:</span> <span class="s2">"516124792:TmV2ZXIgZ29ubmEgZ2l2ZSB5b3UgdXAKTmV2ZXIgZ29ubmEgbGV0IHlvdSBkb3duCk5ldmVyIGdvbm5hIHJ1biBhcm91bmQgYW5kIGRlc2VydCB5b3UgCg"</span>
    <span class="p">},</span>
    <span class="nt">"error"</span><span class="p">:</span> <span class="kc">null</span>
<span class="p">}</span>
</code></pre>
  </div>
  <h2 id="changeperm">
   <code>
    /changePerm
   </code>
   <a class="permalink" href="#changeperm">
    ¶
   </a>
  </h2>
  <p>
   Change a token's permission level
  </p>
  <h3>
   URL Query Parameters
  </h3>
  <table>
   <tr>
    <th>
     Key
    </th>
    <th>
     Value
    </th>
   </tr>
   <tr>
    <td>
     token
    </td>
    <td>
     An owner token to authorize this request
    </td>
   </tr>
   <tr>
    <td>
     userid
    </td>
    <td>
     User ID of the user to update the permission level of
    </td>
   </tr>
   <tr>
    <td>
     permission
    </td>
    <td>
     Permission to give the token
    </td>
   </tr>
  </table>
  <h3>
   Example response
  </h3>
  <div class="highlight">
   <pre><span></span><code><span class="p">{</span>
    <span class="nt">"success"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nt">"result"</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">"previous_perm"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="nt">"current_perm"</span><span class="p">:</span> <span class="mi">2</span>
    <span class="p">},</span>
    <span class="nt">"error"</span><span class="p">:</span> <span class="kc">null</span>
<span class="p">}</span>
</code></pre>
  </div>
  <h2 id="revoke">
   <code>
    /revoke
   </code>
   <a class="permalink" href="#revoke">
    ¶
   </a>
  </h2>
  <p>
   Revokes a token and returns the new token and its data
  </p>
  <h3>
   URL Query Parameters
  </h3>
  <table>
   <tr>
    <th>
     Key
    </th>
    <th>
     Value
    </th>
   </tr>
   <tr>
    <td>
     token
    </td>
    <td>
     An owner token to authorize this request
    </td>
   </tr>
   <tr>
    <td>
     userid
    </td>
    <td>
     User ID of the user to revoke
    </td>
   </tr>
  </table>
  <h3>
   Example response
  </h3>
  <div class="highlight">
   <pre><span></span><code><span class="p">{</span>
    <span class="nt">"success"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nt">"result"</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">"user_id"</span><span class="p">:</span> <span class="mi">516124792</span><span class="p">,</span>
        <span class="nt">"hash"</span><span class="p">:</span> <span class="s2">"516124792:aW4gYSBwYXJhbGxlbCB1bml2ZXJzZSwgL3NsYXAgZG9lc24ndCB0YWtlIGluIGFuIGFyZ3VtZW50IGFuZCBubyBvbmUgc2xhcHMgbWlzZXJ5J3MgYXNzIA"</span><span class="p">,</span>
        <span class="nt">"permission"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="nt">"created_at"</span><span class="p">:</span> <span class="s2">"2021-11-14T14:14:51.931979457Z"</span><span class="p">,</span>
        <span class="nt">"accepted_reports"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="nt">"denied_reports"</span><span class="p">:</span> <span class="mi">0</span>
    <span class="p">},</span>
    <span class="nt">"error"</span><span class="p">:</span> <span class="kc">null</span>
<span class="p">}</span>
</code></pre>
  </div>
  <h2 id="gettoken">
   <code>
    /getToken
   </code>
   <a class="permalink" href="#gettoken">
    ¶
   </a>
  </h2>
  <p>
   Gets the token and data of a user
  </p>
  <h3>
   URL Query Parameters
  </h3>
  <table>
   <tr>
    <th>
     Key
    </th>
    <th>
     Value
    </th>
   </tr>
   <tr>
    <td>
     token
    </td>
    <td>
     An owner token to authorize this request
    </td>
   </tr>
   <tr>
    <td>
     userid
    </td>
    <td>
     User ID of the user to get the token and data of
    </td>
   </tr>
  </table>
  <h3>
   Example response
  </h3>
  <div class="highlight">
   <pre><span></span><code><span class="p">{</span>
    <span class="nt">"success"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nt">"result"</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">"user_id"</span><span class="p">:</span> <span class="mi">516124792</span><span class="p">,</span>
        <span class="nt">"hash"</span><span class="p">:</span> <span class="s2">"516124792:aW4gYW5vdGhlciBwYXJhbGxlbCB1bml2ZXJzZSwgL3NsYXAgdGFrZXMgaW4gYW4gYXJndW1lbnQgYW5kIG5vIG9uZSBzbGFwcyBtaXNlcnkncyBhc3MgIA"</span><span class="p">,</span>
        <span class="nt">"permission"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="nt">"created_at"</span><span class="p">:</span> <span class="s2">"2021-11-14T14:14:51.931979457Z"</span><span class="p">,</span>
        <span class="nt">"accepted_reports"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="nt">"denied_reports"</span><span class="p">:</span> <span class="mi">0</span>
    <span class="p">},</span>
    <span class="nt">"error"</span><span class="p">:</span> <span class="kc">null</span>
<span class="p">}</span>
</code></pre>
  </div>
  <h2 id="registeredusers">
   <code>
    /registeredUsers
   </code>
   <a class="permalink" href="#registeredusers">
    ¶
   </a>
  </h2>
  <p>
   Gets a list of all registered users. If the token passed doesn't belong to an owner, owners won't be included in the list
  </p>
  <h3>
   URL Query Parameters
  </h3>
  <table>
   <tr>
    <th>
     Key
    </th>
    <th>
     Value
    </th>
   </tr>
   <tr>
    <td>
     token
    </td>
    <td>
     An enforcer, inspecter or owner token to authorize this request
    </td>
   </tr>
  </table>
  <h3>
   Example response
  </h3>
  <div class="highlight">
   <pre><span></span><code><span class="p">{</span>
    <span class="nt">"success"</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nt">"result"</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">"registered_users"</span><span class="p">:</span> <span class="p">[</span>
            <span class="mi">25</span><span class="p">,</span>
            <span class="mi">777000</span><span class="p">,</span>
            <span class="mi">214416808</span><span class="p">,</span>
            <span class="mi">516124792</span><span class="p">,</span>
            <span class="mi">558772678</span><span class="p">,</span>
            <span class="mi">792109647</span><span class="p">,</span>
            <span class="mi">895373440</span><span class="p">,</span>
            <span class="mi">1341091260</span>
        <span class="p">]</span>
    <span class="p">},</span>
    <span class="nt">"error"</span><span class="p">:</span> <span class="kc">null</span>
<span class="p">}</span>
</code></pre>
  </div>
 </body>
</html>
